<!DOCTYPE html><html><head><title>LuperSettingsActivity.java</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../../../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../../../../index.html" class="source"><span class="file_name">README</span></a><a href="../../../../../luper-android/src/com/androidlearner/widget/DragThingPlayhead.java.html" class="source "><span class="base_path">luper-android / src / com / androidlearner / widget / </span><span class="file_name">DragThingPlayhead.java</span></a><a href="../../../../../luper-android/src/com/androidlearner/widget/DragThing.java.html" class="source "><span class="base_path">luper-android / src / com / androidlearner / widget / </span><span class="file_name">DragThing.java</span></a><a href="../../../../../luper-android/src/com/androidlearner/widget/ClipThing.java.html" class="source "><span class="base_path">luper-android / src / com / androidlearner / widget / </span><span class="file_name">ClipThing.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/PopupTestActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">PopupTestActivity.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LuperProjectEditorActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperProjectEditorActivity.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/Sequence.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Sequence.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TabProjectsFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabProjectsFragment.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/Clip.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Clip.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/Track.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Track.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/CanvasTestActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">CanvasTestActivity.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/AudioRecorderTestActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">AudioRecorderTestActivity.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LuperForgotPasswordActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperForgotPasswordActivity.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/DragThing.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">DragThing.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TabLoginFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabLoginFragment.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/DialogFactory.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">DialogFactory.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/SQLiteHelper.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">SQLiteHelper.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/User.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">User.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/FileSelectorActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">FileSelectorActivity.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LuperMainActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperMainActivity.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/Playhead.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Playhead.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/Lambda.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Lambda.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LoopTestActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LoopTestActivity.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TabFriendsFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabFriendsFragment.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/ColorChipButton.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">ColorChipButton.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LuperLoginActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperLoginActivity.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TrackView.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TrackView.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TabSplashFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabSplashFragment.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LuperDevToolsActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperDevToolsActivity.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/DragTest.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">DragTest.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LuperHelp.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperHelp.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TabHomeFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabHomeFragment.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/AudioFile.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">AudioFile.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TabsAdapter.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabsAdapter.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LuperSettingsActivity.java.html" class="source selected"><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperSettingsActivity.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TabRegisterFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabRegisterFragment.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/rest/LuperRestClient.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / rest / </span><span class="file_name">LuperRestClient.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/SQLiteDataSource.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">SQLiteDataSource.java</span></a><a href="../../../../../luper-web/dashboard/js/main.js.html" class="source "><span class="base_path">luper-web / dashboard / js / </span><span class="file_name">main.js</span></a><a href="../../../../../luper-web/dashboard/js/vendor/bootstrap.min.js.html" class="source "><span class="base_path">luper-web / dashboard / js / vendor / </span><span class="file_name">bootstrap.min.js</span></a><a href="../../../../../luper-web/dashboard/js/vendor/jquery-1.9.1.min.js.html" class="source "><span class="base_path">luper-web / dashboard / js / vendor / </span><span class="file_name">jquery-1.9.1.min.js</span></a><a href="../../../../../luper-web/dashboard/js/vendor/bootstrap.js.html" class="source "><span class="base_path">luper-web / dashboard / js / vendor / </span><span class="file_name">bootstrap.js</span></a><a href="../../../../../luper-web/dashboard/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js.html" class="source "><span class="base_path">luper-web / dashboard / js / vendor / </span><span class="file_name">modernizr-2.6.2-respond-1.1.0.min.js</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>LuperSettingsActivity.java</h1><div class="filepath">luper-android/src/com/teamluper/luper/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div>
</td><td class="code"><div class="highlight"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">teamluper</span><span class="o">.</span><span class="na">luper</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.accounts.Account</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.accounts.AccountManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.annotation.TargetApi</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.SharedPreferences</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.SharedPreferences.OnSharedPreferenceChangeListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.res.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Build</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.preference.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.v4.app.NavUtils</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.actionbarsherlock.app.SherlockPreferenceActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.actionbarsherlock.view.MenuItem</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.googlecode.androidannotations.annotations.EActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.googlecode.androidannotations.annotations.rest.RestService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.teamluper.luper.rest.LuperRestClient</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span></pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A {@link PreferenceActivity} that presents a set of application settings. On<br />handset devices, settings are presented as a single list. On tablets,<br />settings are split by category, with category headers shown to the left of<br />the list of settings.<br /><p><br />See <a href="http://developer.android.com/design/patterns/settings.html"><br />Android Design: Settings</a> for design guidelines and the <a<br />href="<a href='http://developer.android.com/guide/topics/ui/settings.html'>http://developer.android.com/guide/topics/ui/settings.html</a>">Settings<br />API Guide</a> for more information on developing a Settings UI.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nd">@EActivity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LuperSettingsActivity</span> <span class="kd">extends</span> <span class="n">SherlockPreferenceActivity</span>
                           <span class="kd">implements</span> <span class="n">OnSharedPreferenceChangeListener</span> <span class="o">{</span></pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Determines whether to always show the simplified settings UI, where<br />settings are presented in a single list. When false, settings are shown as<br />a master/detail two-pane view on tablets. When true, a single pane is shown<br />on tablets.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">ALWAYS_SIMPLE_PREFS</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

  <span class="nd">@RestService</span>
  <span class="n">LuperRestClient</span> <span class="n">rest</span><span class="o">;</span>

  <span class="n">AccountManager</span> <span class="n">am</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="n">setupActionBar</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onResume</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onResume</span><span class="o">();</span>
    <span class="k">if</span><span class="o">(!</span><span class="n">testAccounts</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">DialogFactory</span><span class="o">.</span><span class="na">alert</span><span class="o">(</span><span class="k">this</span><span class="o">,</span><span class="s">&quot;Warning: since your device is not logged into a google account,&quot;</span> <span class="o">+</span>
                  <span class="s">&quot; your settings will not be saved to the server properly.&quot;</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">SharedPreferences</span> <span class="n">prefs</span> <span class="o">=</span> <span class="n">PreferenceManager</span><span class="o">.</span><span class="na">getDefaultSharedPreferences</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="n">prefs</span><span class="o">.</span><span class="na">registerOnSharedPreferenceChangeListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onPause</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onPause</span><span class="o">();</span>
    <span class="n">SharedPreferences</span> <span class="n">prefs</span> <span class="o">=</span> <span class="n">PreferenceManager</span><span class="o">.</span><span class="na">getDefaultSharedPreferences</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="n">prefs</span><span class="o">.</span><span class="na">unregisterOnSharedPreferenceChangeListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
  <span class="o">}</span></pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Set up the {@link android.app.ActionBar}, if the API is available.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@TargetApi</span><span class="o">(</span><span class="n">Build</span><span class="o">.</span><span class="na">VERSION_CODES</span><span class="o">.</span><span class="na">HONEYCOMB</span><span class="o">)</span>
  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">setupActionBar</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">Build</span><span class="o">.</span><span class="na">VERSION</span><span class="o">.</span><span class="na">SDK_INT</span> <span class="o">&gt;=</span> <span class="n">Build</span><span class="o">.</span><span class="na">VERSION_CODES</span><span class="o">.</span><span class="na">HONEYCOMB</span><span class="o">)</span> <span class="o">{</span></pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><p>Show the Up button in the action bar.</p>
</td><td class="code"><div class="highlight"><pre>      <span class="n">getActionBar</span><span class="o">().</span><span class="na">setDisplayHomeAsUpEnabled</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onOptionsItemSelected</span><span class="o">(</span><span class="n">MenuItem</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">switch</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getItemId</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">case</span> <span class="n">android</span><span class="o">.</span><span class="na">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">home</span><span class="o">:</span></pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><p>This ID represents the Home or Up button. In the case of this
activity, the Up button is shown. Use NavUtils to allow users
to navigate up one level in the application structure. For
more details, see the Navigation pattern on Android Design:</p>

<p>http://developer.android.com/design/patterns/navigation.html#up-vs-back</p>

<p>TODO: If Settings has multiple levels, Up should navigate up
that hierarchy.</p>
</td><td class="code"><div class="highlight"><pre>      <span class="n">NavUtils</span><span class="o">.</span><span class="na">navigateUpFromSameTask</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">onOptionsItemSelected</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onPostCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onPostCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>

    <span class="n">setupSimplePreferencesScreen</span><span class="o">();</span>
  <span class="o">}</span></pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Shows the simplified settings UI if the device configuration if the device<br />configuration dictates that a simplified, single-pane UI should be shown.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">setupSimplePreferencesScreen</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">isSimplePreferences</span><span class="o">(</span><span class="k">this</span><span class="o">))</span> <span class="o">{</span>
      <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span></pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><p>In the simplified UI, fragments are not used at all and we instead
use the older PreferenceActivity APIs.</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><p>Add 'general' preferences.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="n">addPreferencesFromResource</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">pref_general</span><span class="o">);</span></pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><p>Bind the summaries of EditText/List/Dialog/Ringtone preferences to
their values. When their values change, their summaries are updated
to reflect the new value, per the Android Design guidelines.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="n">bindPreferenceSummaryToValue</span><span class="o">(</span><span class="n">findPreference</span><span class="o">(</span><span class="s">&quot;pref_favColor&quot;</span><span class="o">));</span>
  <span class="o">}</span></pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>{@inheritDoc}</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onIsMultiPane</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">isXLargeTablet</span><span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">isSimplePreferences</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
  <span class="o">}</span></pre></div></td></tr><tr id="section-12"><td class="docs"><div class="pilwrap"><a href="#section-12" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Helper method to determine if the device has an extra-large screen. For<br />example, 10" tablets are extra-large.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isXLargeTablet</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getResources</span><span class="o">().</span><span class="na">getConfiguration</span><span class="o">().</span><span class="na">screenLayout</span> <span class="o">&amp;</span> <span class="n">Configuration</span><span class="o">.</span><span class="na">SCREENLAYOUT_SIZE_MASK</span><span class="o">)</span> <span class="o">&gt;=</span> <span class="n">Configuration</span><span class="o">.</span><span class="na">SCREENLAYOUT_SIZE_XLARGE</span><span class="o">;</span>
  <span class="o">}</span></pre></div></td></tr><tr id="section-13"><td class="docs"><div class="pilwrap"><a href="#section-13" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Determines whether the simplified settings UI should be shown. This is true<br />if this is forced via {@link #ALWAYS_SIMPLE_PREFS}, or the device doesn't<br />have newer APIs like {@link PreferenceFragment}, or the device doesn't have<br />an extra-large screen. In these cases, a single-pane "simplified" settings<br />UI should be shown.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">isSimplePreferences</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">ALWAYS_SIMPLE_PREFS</span>
        <span class="o">||</span> <span class="n">Build</span><span class="o">.</span><span class="na">VERSION</span><span class="o">.</span><span class="na">SDK_INT</span> <span class="o">&lt;</span> <span class="n">Build</span><span class="o">.</span><span class="na">VERSION_CODES</span><span class="o">.</span><span class="na">HONEYCOMB</span>
        <span class="o">||</span> <span class="o">!</span><span class="n">isXLargeTablet</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
  <span class="o">}</span></pre></div></td></tr><tr id="section-14"><td class="docs"><div class="pilwrap"><a href="#section-14" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>{@inheritDoc}</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@Override</span>
  <span class="nd">@TargetApi</span><span class="o">(</span><span class="n">Build</span><span class="o">.</span><span class="na">VERSION_CODES</span><span class="o">.</span><span class="na">HONEYCOMB</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBuildHeaders</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Header</span><span class="o">&gt;</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">isSimplePreferences</span><span class="o">(</span><span class="k">this</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">loadHeadersFromResource</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">pref_headers</span><span class="o">,</span> <span class="n">target</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span></pre></div></td></tr><tr id="section-15"><td class="docs"><div class="pilwrap"><a href="#section-15" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>A preference value change listener that updates the preference's summary to<br />reflect its new value.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Preference</span><span class="o">.</span><span class="na">OnPreferenceChangeListener</span> <span class="n">sBindPreferenceSummaryToValueListener</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Preference</span><span class="o">.</span><span class="na">OnPreferenceChangeListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onPreferenceChange</span><span class="o">(</span><span class="n">Preference</span> <span class="n">preference</span><span class="o">,</span> <span class="n">Object</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">String</span> <span class="n">stringValue</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>

      <span class="k">if</span> <span class="o">(</span><span class="n">preference</span> <span class="k">instanceof</span> <span class="n">ListPreference</span><span class="o">)</span> <span class="o">{</span></pre></div></td></tr><tr id="section-16"><td class="docs"><div class="pilwrap"><a href="#section-16" class="pilcrow">&#182;</a></div><p>For list preferences, look up the correct display value in
the preference's 'entries' list.</p>
</td><td class="code"><div class="highlight"><pre>        <span class="n">ListPreference</span> <span class="n">listPreference</span> <span class="o">=</span> <span class="o">(</span><span class="n">ListPreference</span><span class="o">)</span> <span class="n">preference</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">listPreference</span><span class="o">.</span><span class="na">findIndexOfValue</span><span class="o">(</span><span class="n">stringValue</span><span class="o">);</span></pre></div></td></tr><tr id="section-17"><td class="docs"><div class="pilwrap"><a href="#section-17" class="pilcrow">&#182;</a></div><p>Set the summary to reflect the new value.</p>
</td><td class="code"><div class="highlight"><pre>        <span class="n">preference</span><span class="o">.</span><span class="na">setSummary</span><span class="o">(</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">listPreference</span><span class="o">.</span><span class="na">getEntries</span><span class="o">()[</span><span class="n">index</span><span class="o">]</span>
            <span class="o">:</span> <span class="kc">null</span><span class="o">);</span>

      <span class="o">}</span> <span class="k">else</span> <span class="o">{</span></pre></div></td></tr><tr id="section-18"><td class="docs"><div class="pilwrap"><a href="#section-18" class="pilcrow">&#182;</a></div><p>For all other preferences, set the summary to the value's
simple string representation.</p>
</td><td class="code"><div class="highlight"><pre>        <span class="n">preference</span><span class="o">.</span><span class="na">setSummary</span><span class="o">(</span><span class="n">stringValue</span><span class="o">);</span>
      <span class="o">}</span>

      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">};</span></pre></div></td></tr><tr id="section-19"><td class="docs"><div class="pilwrap"><a href="#section-19" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>Binds a preference's summary to its value. More specifically, when the<br />preference's value is changed, its summary (line of text below the<br />preference title) is updated to reflect the value. The summary is also<br />immediately updated upon calling this method. The exact display format is<br />dependent on the type of preference.</p></div><div class="details"><div class="dox_tag_title">See</div><div class="dox_tag_detail"><span class="dox_type">#sBindPreferenceSummaryToValueListener</span></div></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">bindPreferenceSummaryToValue</span><span class="o">(</span><span class="n">Preference</span> <span class="n">preference</span><span class="o">)</span> <span class="o">{</span></pre></div></td></tr><tr id="section-20"><td class="docs"><div class="pilwrap"><a href="#section-20" class="pilcrow">&#182;</a></div><p>Set the listener to watch for value changes.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="n">preference</span>
        <span class="o">.</span><span class="na">setOnPreferenceChangeListener</span><span class="o">(</span><span class="n">sBindPreferenceSummaryToValueListener</span><span class="o">);</span></pre></div></td></tr><tr id="section-21"><td class="docs"><div class="pilwrap"><a href="#section-21" class="pilcrow">&#182;</a></div><p>Trigger the listener immediately with the preference's
current value.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="n">sBindPreferenceSummaryToValueListener</span><span class="o">.</span><span class="na">onPreferenceChange</span><span class="o">(</span><span class="n">preference</span><span class="o">,</span>
        <span class="n">PreferenceManager</span><span class="o">.</span><span class="na">getDefaultSharedPreferences</span><span class="o">(</span><span class="n">preference</span><span class="o">.</span><span class="na">getContext</span><span class="o">())</span>
            <span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">preference</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="s">&quot;&quot;</span><span class="o">));</span>
  <span class="o">}</span></pre></div></td></tr><tr id="section-22"><td class="docs"><div class="pilwrap"><a href="#section-22" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This fragment shows general preferences only. It is used when the activity<br />is showing a two-pane settings UI.</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@TargetApi</span><span class="o">(</span><span class="n">Build</span><span class="o">.</span><span class="na">VERSION_CODES</span><span class="o">.</span><span class="na">HONEYCOMB</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">GeneralPreferenceFragment</span> <span class="kd">extends</span> <span class="n">PreferenceFragment</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
      <span class="n">addPreferencesFromResource</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">pref_general</span><span class="o">);</span></pre></div></td></tr><tr id="section-23"><td class="docs"><div class="pilwrap"><a href="#section-23" class="pilcrow">&#182;</a></div><p>Bind the summaries of EditText/List/Dialog/Ringtone preferences
to their values. When their values change, their summaries are
updated to reflect the new value, per the Android Design
guidelines.</p>
</td><td class="code"><div class="highlight"><pre>      <span class="n">bindPreferenceSummaryToValue</span><span class="o">(</span><span class="n">findPreference</span><span class="o">(</span><span class="s">&quot;pref_favColor&quot;</span><span class="o">));</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kt">boolean</span> <span class="nf">testAccounts</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">am</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="n">am</span> <span class="o">=</span> <span class="n">AccountManager</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="n">Account</span><span class="o">[]</span> <span class="n">accounts</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="na">getAccountsByType</span><span class="o">(</span><span class="s">&quot;com.google&quot;</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;== LUPER ACCOUNTS TESTING ==  found &quot;</span><span class="o">+</span><span class="n">accounts</span><span class="o">.</span><span class="na">length</span><span class="o">+</span><span class="s">&quot; accounts&quot;</span><span class="o">);</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">accounts</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">accounts</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">accounts</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSharedPreferenceChanged</span><span class="o">(</span><span class="n">SharedPreferences</span> <span class="n">sharedPreferences</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">key</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">DialogFactory</span><span class="o">.</span><span class="na">toastMessage</span><span class="o">(</span><span class="k">this</span><span class="o">,</span><span class="s">&quot;TODO: Save new &quot;</span><span class="o">+</span><span class="n">key</span><span class="o">+</span><span class="s">&quot; preference value to server!&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>

</pre></div></td></tr></tbody></table><div id="generated">generated Thu May 02 2013 02:15:16 GMT+0000 (UTC)  </div><div id="projectname"><a href="../../../../../index.html">Luper</a></div></div></body></html>