<!DOCTYPE html><html><head><title>LuperApp.java</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../../../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../../../../index.html" class="source"><span class="file_name">README</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/Sequence.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Sequence.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/AudioRecorderTest.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">AudioRecorderTest.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TabProjectsFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabProjectsFragment.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/Clip.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Clip.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/CanvasTest.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">CanvasTest.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/Track.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Track.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/ExampleProject.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">ExampleProject.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LuperSQLiteHelper.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperSQLiteHelper.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/test/TestEffects.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / test / </span><span class="file_name">TestEffects.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/ProjectView.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">ProjectView.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/StringCallback.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">StringCallback.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/User.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">User.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LoopTest.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LoopTest.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TabFriendsFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabFriendsFragment.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/FileSelector.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">FileSelector.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LuperDataSource.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperDataSource.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/ProjectFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">ProjectFragment.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/PopupTest.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">PopupTest.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TrackView.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TrackView.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LuperApp.java.html" class="source selected"><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperApp.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TabHomeFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabHomeFragment.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/AudioFile.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">AudioFile.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/TabsAdapter.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabsAdapter.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/ColorChipView.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">ColorChipView.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/rest/LuperRestClient.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / rest / </span><span class="file_name">LuperRestClient.java</span></a><a href="../../../../../luper-android/src/com/teamluper/luper/LuperSettings.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperSettings.java</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>LuperApp.java</h1><div class="filepath">luper-android/src/com/teamluper/luper/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div><h2>LuperApp.java</h2>
</td><td class="code"><div class="highlight"><pre> </pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><p>NOTE: ActionBarSherlock is a polyfill providing the new Android 4.2 ActionBar
      functionality to all versions of android.  To compile this project
      properly, the actionbarsherlock project must also be in your
      workspace and/or build path in addition to the Luper project.
      See README.md on github for more details.</p>
</td><td class="code"><div class="highlight"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">teamluper</span><span class="o">.</span><span class="na">luper</span><span class="o">;</span></pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><p>imports from the core android API</p>
</td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileNotFoundException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.os.Environment</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.accounts.Account</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.accounts.AccountManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.app.AlertDialog</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.DialogInterface</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.Intent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Environment</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.support.v4.view.ViewPager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.text.Editable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.util.Log</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.View.OnClickListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.ArrayAdapter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.EditText</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.ListView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.TextView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.Toast</span><span class="o">;</span></pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><p>imports for ActionBarSherlock dependency</p>
</td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">com.actionbarsherlock.app.ActionBar</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.actionbarsherlock.app.SherlockFragmentActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.actionbarsherlock.view.Menu</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.actionbarsherlock.view.MenuInflater</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.actionbarsherlock.view.MenuItem</span><span class="o">;</span></pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><p>imports for AndroidAnnotations dependency</p>
</td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">com.googlecode.androidannotations.annotations.AfterViews</span><span class="o">;</span></pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><p>@AfterViews is never used, but don't remove as we may want to use it eventually</p>
</td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">com.googlecode.androidannotations.annotations.Background</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.googlecode.androidannotations.annotations.EActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.googlecode.androidannotations.annotations.UiThread</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.googlecode.androidannotations.annotations.ViewById</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.googlecode.androidannotations.annotations.rest.RestService</span><span class="o">;</span></pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><p>imports for the SpringFramework REST dependency</p>
</td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">org.springframework.web.client.HttpClientErrorException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.teamluper.luper.rest.LuperRestClient</span><span class="o">;</span></pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><p>imports for Test Suite</p>
</td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">com.teamluper.luper.test.TestEffects</span><span class="o">;</span></pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><p>@EActivity = "Enhanced Activity", which turns on AndroidAnnotations features</p>
</td><td class="code"><div class="highlight"><pre><span class="nd">@EActivity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LuperApp</span> <span class="kd">extends</span> <span class="n">SherlockFragmentActivity</span> <span class="o">{</span>

  <span class="nd">@RestService</span>
  <span class="n">LuperRestClient</span> <span class="n">rest</span><span class="o">;</span>
  
  <span class="n">ViewPager</span> <span class="n">mViewPager</span><span class="o">;</span>
  <span class="n">TabsAdapter</span> <span class="n">mTabsAdapter</span><span class="o">;</span>
  </pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><p>Additional local variables</p>
</td><td class="code"><div class="highlight"><pre>  <span class="n">AccountManager</span> <span class="n">am</span><span class="o">;</span>
  <span class="n">LuperDataSource</span> <span class="n">dataSource</span><span class="o">;</span>
  
  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
    </pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><p>set up the ViewPager, which we will use in conjunction with tabs.
this makes it possible to swipe left and right between the tabs.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="n">mViewPager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ViewPager</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="n">mViewPager</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">tabcontentpager</span><span class="o">);</span>
    <span class="n">setContentView</span><span class="o">(</span><span class="n">mViewPager</span><span class="o">);</span>
    
    <span class="n">dataSource</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LuperDataSource</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="n">dataSource</span><span class="o">.</span><span class="na">open</span><span class="o">();</span>
    </pre></div></td></tr><tr id="section-12"><td class="docs"><div class="pilwrap"><a href="#section-12" class="pilcrow">&#182;</a></div><p>TEMPORARY: testing the readability of the database source file</p>

<div class="dox"><div class="summary"><p>File dbFile = getDatabasePath("luperlocal.db");<br />    String dbFilePath = dbFile.getAbsolutePath();<br />    Log.i("SQLITE DATABASE PATH: ", dbFilePath);<br />    String rawDatabase = "failed";<br />    try {<br />      java.io.InputStream in = new java.io.FileInputStream(dbFilePath);<br />      java.io.OutputStream out = new java.io.FileOutputStream(Environment.getExternalStorageDirectory()+"/LuperApp/sqlite_backup.db");<br />      byte[] buffer = new byte[1024];<br />      int length;<br />      while ((length = in.read(buffer))>0) {<br />        out.write(buffer, 0, length);<br />      }<br />      //Close the streams<br />      out.flush();<br />      out.close();<br />      in.close();<br />    } catch (Exception e) {<br />      e.printStackTrace();<br />    }<br />    Log.i("backup",Environment.getExternalStorageDirectory()+"/LuperApp/sqlite_backup.db");</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>    
    <span class="kd">final</span> <span class="n">ActionBar</span> <span class="n">bar</span> <span class="o">=</span> <span class="n">getSupportActionBar</span><span class="o">();</span>
    <span class="n">bar</span><span class="o">.</span><span class="na">setNavigationMode</span><span class="o">(</span><span class="n">ActionBar</span><span class="o">.</span><span class="na">NAVIGATION_MODE_TABS</span><span class="o">);</span> <span class="c1">// Gives us Tabs!</span>
    </pre></div></td></tr><tr id="section-13"><td class="docs"><div class="pilwrap"><a href="#section-13" class="pilcrow">&#182;</a></div><p>FIXME this is slowing down the app launch dramatically.  Perhaps do it in background?
Creates a folder for Luper and associated clips and projects</p>
</td><td class="code"><div class="highlight"><pre>    <span class="n">File</span> <span class="n">nfile</span><span class="o">=</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageDirectory</span><span class="o">()+</span><span class="s">&quot;/LuperApp/Clips&quot;</span><span class="o">);</span>
    <span class="n">File</span> <span class="n">mfile</span><span class="o">=</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageDirectory</span><span class="o">()+</span><span class="s">&quot;/LuperApp/Projects&quot;</span><span class="o">);</span>
    <span class="n">nfile</span><span class="o">.</span><span class="na">mkdir</span><span class="o">();</span>
    <span class="n">mfile</span><span class="o">.</span><span class="na">mkdir</span><span class="o">();</span>
    
    </pre></div></td></tr><tr id="section-14"><td class="docs"><div class="pilwrap"><a href="#section-14" class="pilcrow">&#182;</a></div><p>now we set up the TabsAdapter, which is a special class borrowed from Google.
TabsAdapter.java takes care of all the guts of the Tab interactions, and
links it with our ViewPager for us.  The code below is all we need to
add some fragment content as tabs in the ActionBar!</p>
</td><td class="code"><div class="highlight"><pre>    <span class="n">mTabsAdapter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TabsAdapter</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">mViewPager</span><span class="o">);</span>
    <span class="n">mTabsAdapter</span><span class="o">.</span><span class="na">addTab</span><span class="o">(</span><span class="n">bar</span><span class="o">.</span><span class="na">newTab</span><span class="o">().</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">+</span><span class="s">&quot;Home&quot;</span><span class="o">),</span>
        <span class="n">TabHomeFragment_</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">mTabsAdapter</span><span class="o">.</span><span class="na">addTab</span><span class="o">(</span><span class="n">bar</span><span class="o">.</span><span class="na">newTab</span><span class="o">().</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">+</span><span class="s">&quot;Projects&quot;</span><span class="o">),</span>
        <span class="n">TabProjectsFragment_</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">mTabsAdapter</span><span class="o">.</span><span class="na">addTab</span><span class="o">(</span><span class="n">bar</span><span class="o">.</span><span class="na">newTab</span><span class="o">().</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">+</span><span class="s">&quot;Friends&quot;</span><span class="o">),</span>
        <span class="n">TabFriendsFragment_</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    </pre></div></td></tr><tr id="section-15"><td class="docs"><div class="pilwrap"><a href="#section-15" class="pilcrow">&#182;</a></div><p>create a directory to save in</p>
</td><td class="code"><div class="highlight"><pre>    <span class="n">File</span> <span class="n">testdir</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageDirectory</span><span class="o">().</span><span class="na">getAbsolutePath</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;/LuperApp/&quot;</span><span class="o">);</span>
    <span class="n">testdir</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">();</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onResume</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onResume</span><span class="o">();</span>
    <span class="n">testAccounts</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onCreateOptionsMenu</span><span class="o">(</span><span class="n">Menu</span> <span class="n">menu</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">MenuInflater</span> <span class="n">inf</span> <span class="o">=</span> <span class="n">getSupportMenuInflater</span><span class="o">();</span>
    <span class="n">inf</span><span class="o">.</span><span class="na">inflate</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">menu</span><span class="o">.</span><span class="na">activity_main</span><span class="o">,</span> <span class="n">menu</span><span class="o">);</span>
    </pre></div></td></tr><tr id="section-16"><td class="docs"><div class="pilwrap"><a href="#section-16" class="pilcrow">&#182;</a></div><p>because one of the action items is a custom view,
we need the next few lines to force it to use onOptionsItemSelected
when it's clicked.</p>
</td><td class="code"><div class="highlight"><pre>    <span class="kd">final</span> <span class="n">MenuItem</span> <span class="n">item</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">findItem</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">menu_new_project</span><span class="o">);</span>
    <span class="n">item</span><span class="o">.</span><span class="na">getActionView</span><span class="o">().</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">onOptionsItemSelected</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">});</span>
    
    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">onCreateOptionsMenu</span><span class="o">(</span><span class="n">menu</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onOptionsItemSelected</span><span class="o">(</span><span class="n">MenuItem</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getItemId</span><span class="o">()</span> <span class="o">==</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">menu_new_project</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">promptDialog</span><span class="o">(</span><span class="s">&quot;New Project&quot;</span><span class="o">,</span>
        <span class="s">&quot;Please type a name for your project.  You can change it later.&quot;</span><span class="o">,</span>
        <span class="k">new</span> <span class="nf">StringCallback</span><span class="o">()</span> <span class="o">{</span>
          <span class="kd">public</span> <span class="kt">void</span> <span class="nf">go</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">newProject</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
          <span class="o">}</span>
        <span class="o">}</span>
      <span class="o">);</span>
    <span class="o">}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getItemId</span><span class="o">()</span> <span class="o">==</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">menu_settings</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">LuperSettings_</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-17"><td class="docs"><div class="pilwrap"><a href="#section-17" class="pilcrow">&#182;</a></div><p>method to navigate to the audiorecorder activity</p>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">startRecording</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">AudioRecorderTest_</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-18"><td class="docs"><div class="pilwrap"><a href="#section-18" class="pilcrow">&#182;</a></div><p>this will be removed, it's an example of how we'll access the EC2 server.</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@Background</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testRestAPI</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">String</span> <span class="n">t</span> <span class="o">=</span> <span class="n">rest</span><span class="o">.</span><span class="na">getTestString</span><span class="o">();</span>
      <span class="n">alertDialog</span><span class="o">(</span><span class="s">&quot;Database Connection Test PASS!\n&quot;</span> <span class="o">+</span>
          <span class="s">&quot;Request: GET http://teamluper.com/api/test\n&quot;</span> <span class="o">+</span>
          <span class="s">&quot;Response: &#39;&quot;</span><span class="o">+</span><span class="n">t</span><span class="o">+</span><span class="s">&quot;&#39;&quot;</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">HttpClientErrorException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">alertDialog</span><span class="o">(</span><span class="s">&quot;Database Connection Test FAIL!\n&quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">dropAllData</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dataSource</span><span class="o">.</span><span class="na">dropAllData</span><span class="o">();</span>
    <span class="n">alertDialog</span><span class="o">(</span><span class="s">&quot;Done!&quot;</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">newProject</span><span class="o">(</span><span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Sequence</span> <span class="n">newSequence</span> <span class="o">=</span> <span class="n">dataSource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">title</span><span class="o">);</span>
    <span class="n">ListView</span> <span class="n">lv</span> <span class="o">=</span> <span class="o">(</span><span class="n">ListView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">projectsListView</span><span class="o">);</span>
    <span class="n">ArrayAdapter</span> <span class="n">a</span> <span class="o">=</span> <span class="o">(</span><span class="n">ArrayAdapter</span><span class="o">)</span> <span class="n">lv</span><span class="o">.</span><span class="na">getAdapter</span><span class="o">();</span>
    <span class="n">a</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">newSequence</span><span class="o">);</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-19"><td class="docs"><div class="pilwrap"><a href="#section-19" class="pilcrow">&#182;</a></div><p>Just here until it gets moved to Project Tab</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@Background</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exampleProject</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">ExampleProject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
  <span class="o">}</span>
  
  
  <span class="nd">@Background</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">start_testmenu</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">PopupTest</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-20"><td class="docs"><div class="pilwrap"><a href="#section-20" class="pilcrow">&#182;</a></div><p>code: http://www.java2s.com/Code/Android/2D-Graphics/DrawwithCanvas.htm</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@Background</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">start_testcanvas</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">CanvasTest</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Background</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">start_testloop</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">LoopTest</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Background</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">startAudioTest</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">TestEffects</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
  <span class="o">}</span>
  
  </pre></div></td></tr><tr id="section-21"><td class="docs"><div class="pilwrap"><a href="#section-21" class="pilcrow">&#182;</a></div><p>this will be removed too, it's checking the google account that the
device's user is already logged in with.  We'll likely ditch this in favor
of a Facebook-based login solution.</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@Background</span>
  <span class="kt">void</span> <span class="nf">testAccounts</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">am</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="n">am</span> <span class="o">=</span> <span class="n">AccountManager</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="n">Account</span><span class="o">[]</span> <span class="n">accounts</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="na">getAccountsByType</span><span class="o">(</span><span class="s">&quot;com.google&quot;</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;== LUPER ACCOUNTS TESTING ==  found &quot;</span><span class="o">+</span><span class="n">accounts</span><span class="o">.</span><span class="na">length</span><span class="o">+</span><span class="s">&quot; accounts&quot;</span><span class="o">);</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">accounts</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">accounts</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-22"><td class="docs"><div class="pilwrap"><a href="#section-22" class="pilcrow">&#182;</a></div><p>toastMessage and alertDialog are just helper methods to make it easier to
include a popup message in either dialog or toast form.
perhaps we'll need to move this to a common static class shared by all
our other classes?  if not, they'll need to be repeated in every file.</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@UiThread</span>
  <span class="kt">void</span> <span class="nf">toastMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">message</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
  <span class="o">}</span>
  
  <span class="nd">@UiThread</span>
  <span class="kt">void</span> <span class="nf">alertDialog</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">new</span> <span class="n">AlertDialog</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="k">this</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setCancelable</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="n">message</span><span class="o">)</span>
    <span class="o">.</span><span class="na">setPositiveButton</span><span class="o">(</span><span class="s">&quot;Ok&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">DialogInterface</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">DialogInterface</span> <span class="n">dialog</span><span class="o">,</span> <span class="kt">int</span> <span class="n">which</span><span class="o">)</span> <span class="o">{</span></pre></div></td></tr><tr id="section-23"><td class="docs"><div class="pilwrap"><a href="#section-23" class="pilcrow">&#182;</a></div><p>do nothing</p>
</td><td class="code"><div class="highlight"><pre>      <span class="o">}</span>
    <span class="o">})</span>
    <span class="o">.</span><span class="na">show</span><span class="o">();</span>
  <span class="o">}</span>
  
  <span class="nd">@UiThread</span>
  <span class="kt">void</span> <span class="nf">promptDialog</span><span class="o">(</span><span class="n">String</span> <span class="n">title</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">,</span> <span class="kd">final</span> <span class="n">StringCallback</span> <span class="n">callback</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">EditText</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EditText</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="k">new</span> <span class="n">AlertDialog</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="k">this</span><span class="o">)</span>
      <span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="n">title</span><span class="o">)</span>
      <span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="n">message</span><span class="o">)</span>
      <span class="o">.</span><span class="na">setView</span><span class="o">(</span><span class="n">input</span><span class="o">)</span>
      <span class="o">.</span><span class="na">setPositiveButton</span><span class="o">(</span><span class="s">&quot;Ok&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">DialogInterface</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
          <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">DialogInterface</span> <span class="n">dialog</span><span class="o">,</span> <span class="kt">int</span> <span class="n">whichButton</span><span class="o">)</span> <span class="o">{</span>
              <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
              <span class="n">callback</span><span class="o">.</span><span class="na">go</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
          <span class="o">}</span>
      <span class="o">}).</span><span class="na">setNegativeButton</span><span class="o">(</span><span class="s">&quot;Cancel&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">DialogInterface</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
          <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">DialogInterface</span> <span class="n">dialog</span><span class="o">,</span> <span class="kt">int</span> <span class="n">whichButton</span><span class="o">)</span> <span class="o">{</span></pre></div></td></tr><tr id="section-24"><td class="docs"><div class="pilwrap"><a href="#section-24" class="pilcrow">&#182;</a></div><p>Do nothing.</p>
</td><td class="code"><div class="highlight"><pre>          <span class="o">}</span>
      <span class="o">}).</span><span class="na">show</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>

</pre></div></td></tr></tbody></table><div id="generated">generated Mon Apr 01 2013 20:01:58 GMT+0000 (UTC)  </div><div id="projectname"><a href="../../../../../index.html">Luper</a></div></div></body></html>