<!DOCTYPE html><html><head><title>LuperRestClient.java</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../../../../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../../../../../index.html" class="source"><span class="file_name">README</span></a><a href="../../../../../../luper-android/src/com/androidlearner/widget/DragThingPlayhead.java.html" class="source "><span class="base_path">luper-android / src / com / androidlearner / widget / </span><span class="file_name">DragThingPlayhead.java</span></a><a href="../../../../../../luper-android/src/com/androidlearner/widget/DragThing.java.html" class="source "><span class="base_path">luper-android / src / com / androidlearner / widget / </span><span class="file_name">DragThing.java</span></a><a href="../../../../../../luper-android/src/com/androidlearner/widget/ClipThing.java.html" class="source "><span class="base_path">luper-android / src / com / androidlearner / widget / </span><span class="file_name">ClipThing.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/PopupTestActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">PopupTestActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperProjectEditorActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperProjectEditorActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/Sequence.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Sequence.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabProjectsFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabProjectsFragment.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/Clip.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Clip.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/Track.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Track.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/CanvasTestActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">CanvasTestActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/AudioRecorderTestActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">AudioRecorderTestActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperForgotPasswordActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperForgotPasswordActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/DragThing.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">DragThing.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabLoginFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabLoginFragment.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/DialogFactory.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">DialogFactory.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/SQLiteHelper.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">SQLiteHelper.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/User.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">User.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/FileSelectorActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">FileSelectorActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperMainActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperMainActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/Playhead.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Playhead.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/Lambda.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Lambda.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LoopTestActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LoopTestActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabFriendsFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabFriendsFragment.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/ColorChipButton.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">ColorChipButton.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperLoginActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperLoginActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TrackView.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TrackView.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabSplashFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabSplashFragment.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperDevToolsActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperDevToolsActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/DragTest.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">DragTest.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperHelp.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperHelp.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabHomeFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabHomeFragment.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/AudioFile.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">AudioFile.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabsAdapter.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabsAdapter.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperSettingsActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperSettingsActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabRegisterFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabRegisterFragment.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/rest/LuperRestClient.java.html" class="source selected"><span class="base_path">luper-android / src / com / teamluper / luper / rest / </span><span class="file_name">LuperRestClient.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/SQLiteDataSource.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">SQLiteDataSource.java</span></a><a href="../../../../../../luper-web/dashboard/js/main.js.html" class="source "><span class="base_path">luper-web / dashboard / js / </span><span class="file_name">main.js</span></a><a href="../../../../../../luper-web/dashboard/js/vendor/bootstrap.min.js.html" class="source "><span class="base_path">luper-web / dashboard / js / vendor / </span><span class="file_name">bootstrap.min.js</span></a><a href="../../../../../../luper-web/dashboard/js/vendor/jquery-1.9.1.min.js.html" class="source "><span class="base_path">luper-web / dashboard / js / vendor / </span><span class="file_name">jquery-1.9.1.min.js</span></a><a href="../../../../../../luper-web/dashboard/js/vendor/bootstrap.js.html" class="source "><span class="base_path">luper-web / dashboard / js / vendor / </span><span class="file_name">bootstrap.js</span></a><a href="../../../../../../luper-web/dashboard/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js.html" class="source "><span class="base_path">luper-web / dashboard / js / vendor / </span><span class="file_name">modernizr-2.6.2-respond-1.1.0.min.js</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>LuperRestClient.java</h1><div class="filepath">luper-android/src/com/teamluper/luper/rest/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div>
</td><td class="code"><div class="highlight"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">teamluper</span><span class="o">.</span><span class="na">luper</span><span class="o">.</span><span class="na">rest</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.googlecode.androidannotations.annotations.rest.Get</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.googlecode.androidannotations.annotations.rest.Post</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.googlecode.androidannotations.annotations.rest.Rest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.converter.StringHttpMessageConverter</span><span class="o">;</span></pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><h1>LuperRestClient.java</h1>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><p>This is a very bare-bones interface which simply defines the expected requests and responses for each
HTTP API endpoint, in the form of parameter types and return types, each of which is annotated with
@Get or @Post and the URL of the corresponding endpoint.
(the other end of this connection is defined in the PHP code at luper-web/api/api.php)</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><p>To read more about the REST style of Web API architecture, see:
https://en.wikipedia.org/wiki/Representational<em>state</em>transfer</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><p>At compile time, the AndroidAnnotations processor script generates a class which implements this one,
and its source is automatically filled in (writing it by hand would be very repetitive).
this is the beauty of AndroidAnnotations... without it, this file would be 20 times larger.</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><p>To read more about the AndroidAnnotations magic that's going on here, see:
https://github.com/excilys/androidannotations/wiki/Rest%20API</p>
</td><td class="code"><div class="highlight"><pre></pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><p>We are currently hosting the luper-web code and the MySQL database at TeamLuper.com.
the rootUrl value in the @Rest annotation should be changed if the server is ever relocated.</p>
</td><td class="code"><div class="highlight"><pre><span class="nd">@Rest</span><span class="o">(</span><span class="n">rootUrl</span> <span class="o">=</span> <span class="s">&quot;http://www.teamluper.com&quot;</span><span class="o">,</span> <span class="n">converters</span> <span class="o">=</span> <span class="n">StringHttpMessageConverter</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">LuperRestClient</span> <span class="o">{</span>

  <span class="nd">@Get</span><span class="o">(</span><span class="s">&quot;/api/null&quot;</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">();</span>

  <span class="nd">@Get</span><span class="o">(</span><span class="s">&quot;/api/test&quot;</span><span class="o">)</span>
  <span class="n">String</span> <span class="nf">getTestString</span><span class="o">();</span>

  <span class="nd">@Post</span><span class="o">(</span><span class="s">&quot;/api/auth-register&quot;</span><span class="o">)</span>
  <span class="n">String</span> <span class="nf">registerNewAccount</span><span class="o">(</span><span class="n">String</span> <span class="n">requestJSON</span><span class="o">);</span></pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><p>requestJSON must contain: email, passwordHash, username</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@Post</span><span class="o">(</span><span class="s">&quot;/api/auth-challenge&quot;</span><span class="o">)</span>
  <span class="n">String</span> <span class="nf">getLoginChallengeSalt</span><span class="o">(</span><span class="n">String</span> <span class="n">requestJSON</span><span class="o">);</span></pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><p>requestJSON must contain: email</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@Post</span><span class="o">(</span><span class="s">&quot;/api/auth-login&quot;</span><span class="o">)</span>
  <span class="n">String</span> <span class="nf">validateLoginAttempt</span><span class="o">(</span><span class="n">String</span> <span class="n">requestJSON</span><span class="o">);</span></pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><p>requestJSON must contain: email, attemptHash</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@Post</span><span class="o">(</span><span class="s">&quot;/api/auth-passwd&quot;</span><span class="o">)</span>
  <span class="n">String</span> <span class="nf">changeUserPassword</span><span class="o">(</span><span class="n">String</span> <span class="n">requestJSON</span><span class="o">);</span></pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><p>requestJSON must contain: email, oldPasswordAttemptHash, newPasswordHash</p>
</td><td class="code"><div class="highlight"><pre>  <span class="nd">@Get</span><span class="o">(</span><span class="s">&quot;/api/fetch-user/{email}&quot;</span><span class="o">)</span>
  <span class="n">String</span> <span class="nf">fetchUserByEmail</span><span class="o">(</span><span class="n">String</span> <span class="n">email</span><span class="o">);</span>

<span class="o">}</span>

</pre></div></td></tr></tbody></table><div id="generated">generated Thu May 02 2013 03:29:32 GMT+0000 (UTC)  </div><div id="projectname"><a href="../../../../../../index.html">Luper</a></div></div></body></html>