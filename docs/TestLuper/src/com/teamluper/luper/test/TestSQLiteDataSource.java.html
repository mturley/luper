<!DOCTYPE html><html><head><title>TestSQLiteDataSource.java</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../../../../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../../../../../index.html" class="source"><span class="file_name">README</span></a><a href="../../../../../../TestLuper/src/com/teamluper/luper/test/TestSQLiteDataSource.java.html" class="source selected"><span class="base_path">TestLuper / src / com / teamluper / luper / test / </span><span class="file_name">TestSQLiteDataSource.java</span></a><a href="../../../../../../TestLuper/src/com/teamluper/luper/test/TestTrack.java.html" class="source "><span class="base_path">TestLuper / src / com / teamluper / luper / test / </span><span class="file_name">TestTrack.java</span></a><a href="../../../../../../TestLuper/src/com/teamluper/luper/test/TestClip.java.html" class="source "><span class="base_path">TestLuper / src / com / teamluper / luper / test / </span><span class="file_name">TestClip.java</span></a><a href="../../../../../../TestLuper/src/com/teamluper/luper/test/TestSequence.java.html" class="source "><span class="base_path">TestLuper / src / com / teamluper / luper / test / </span><span class="file_name">TestSequence.java</span></a><a href="../../../../../../TestLuper/src/com/teamluper/luper/test/TestAudioFile.java.html" class="source "><span class="base_path">TestLuper / src / com / teamluper / luper / test / </span><span class="file_name">TestAudioFile.java</span></a><a href="../../../../../../TestLuper/src/com/teamluper/luper/test/TestUser.java.html" class="source "><span class="base_path">TestLuper / src / com / teamluper / luper / test / </span><span class="file_name">TestUser.java</span></a><a href="../../../../../../luper-android/src/com/androidlearner/widget/DragThingPlayhead.java.html" class="source "><span class="base_path">luper-android / src / com / androidlearner / widget / </span><span class="file_name">DragThingPlayhead.java</span></a><a href="../../../../../../luper-android/src/com/androidlearner/widget/DragThing.java.html" class="source "><span class="base_path">luper-android / src / com / androidlearner / widget / </span><span class="file_name">DragThing.java</span></a><a href="../../../../../../luper-android/src/com/androidlearner/widget/ClipThing.java.html" class="source "><span class="base_path">luper-android / src / com / androidlearner / widget / </span><span class="file_name">ClipThing.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/PopupTestActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">PopupTestActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperProjectEditorActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperProjectEditorActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/Sequence.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Sequence.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabProjectsFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabProjectsFragment.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/Clip.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Clip.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/Track.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Track.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/CanvasTestActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">CanvasTestActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/AudioRecorderTestActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">AudioRecorderTestActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperForgotPasswordActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperForgotPasswordActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/DragThing.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">DragThing.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabLoginFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabLoginFragment.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/DialogFactory.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">DialogFactory.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/SQLiteHelper.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">SQLiteHelper.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/User.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">User.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/FileSelectorActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">FileSelectorActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperMainActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperMainActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/Playhead.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Playhead.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/Lambda.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">Lambda.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LoopTestActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LoopTestActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabFriendsFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabFriendsFragment.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/ColorChipButton.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">ColorChipButton.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperLoginActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperLoginActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TrackView.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TrackView.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabSplashFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabSplashFragment.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperDevToolsActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperDevToolsActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/DragTest.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">DragTest.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperHelp.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperHelp.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabHomeFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabHomeFragment.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/AudioFile.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">AudioFile.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabsAdapter.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabsAdapter.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/LuperSettingsActivity.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">LuperSettingsActivity.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/TabRegisterFragment.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">TabRegisterFragment.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/rest/LuperRestClient.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / rest / </span><span class="file_name">LuperRestClient.java</span></a><a href="../../../../../../luper-android/src/com/teamluper/luper/SQLiteDataSource.java.html" class="source "><span class="base_path">luper-android / src / com / teamluper / luper / </span><span class="file_name">SQLiteDataSource.java</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>TestSQLiteDataSource.java</h1><div class="filepath">TestLuper/src/com/teamluper/luper/test/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div>
</td><td class="code"><div class="highlight"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">teamluper</span><span class="o">.</span><span class="na">luper</span><span class="o">.</span><span class="na">test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.teamluper.luper.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.test.ActivityInstrumentationTestCase2</span><span class="o">;</span></pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>This is a collection of tests for SQLiteDataSource class <br />that performs interactions with the database.<br />The class uses LupreMainActivity.<br />All the entries that are inserted into the database are deleted at the end of each<br />test method, so we can use the same ID's in each test.</p></div><div class="details"></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestSQLiteDataSource</span> <span class="kd">extends</span> <span class="n">ActivityInstrumentationTestCase2</span><span class="o">&lt;</span><span class="n">LuperMainActivity_</span><span class="o">&gt;</span> <span class="o">{</span>
  
  <span class="kd">private</span> <span class="n">LuperMainActivity_</span> <span class="n">activity</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">SQLiteDataSource</span> <span class="n">datasource</span><span class="o">;</span>
  
  <span class="kd">public</span> <span class="nf">TestSQLiteDataSource</span><span class="o">()</span> <span class="o">{</span>
      <span class="kd">super</span><span class="o">(</span><span class="n">LuperMainActivity_</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
  </pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>This method is called before running the tests.
<ul><li>It creates a new instance of SQLiteDataSource and </li>
<li>makes sure that there is no data and we can use any ID's for testing</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
      <span class="kd">super</span><span class="o">.</span><span class="na">setUp</span><span class="o">();</span>
      <span class="n">activity</span> <span class="o">=</span> <span class="n">getActivity</span><span class="o">();</span>
    <span class="n">datasource</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SQLiteDataSource</span><span class="o">(</span><span class="n">activity</span><span class="o">);</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">open</span><span class="o">();</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">dropAllData</span><span class="o">();</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>This method is called after running all the tests to clean up.</li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">tearDown</span><span class="o">();</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create a user and make sure that the entry has correct ID, username, and email</li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCreateUser</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;userID should be 123456787&quot;</span><span class="o">,</span> <span class="s">&quot;1234567890&quot;</span><span class="o">,</span> <span class="s">&quot;&quot;</span><span class="o">+</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;username should be testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;email should be testUser@mail.com&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create a user, try fetching the entry by ID and make sure 
<ul><li>the original user and fetched one are the same</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetUserById</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>   
    <span class="kt">long</span> <span class="n">userID</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="n">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getUserById</span><span class="o">(</span><span class="n">userID</span><span class="o">);</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">user2</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of user and user2 should be the same&quot;</span><span class="o">,</span> <span class="n">userID</span><span class="o">,</span> <span class="n">user2</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create a user, try fetching the entry by email and make sure 
<ul><li>the original user and fetched one are the same</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetUserByEmail</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>   
    <span class="n">String</span> <span class="n">email</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">();</span>
    <span class="n">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getUserByEmail</span><span class="o">(</span><span class="n">email</span><span class="o">);</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">user2</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;emails of user and user2 should be the same&quot;</span><span class="o">,</span> <span class="n">email</span><span class="o">,</span> <span class="n">user2</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create a user, try fetching the entry with a query (in this case by username)
<ul><li>and make sure the original user and fetched one are the same</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetUserWhere</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>   
    <span class="n">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getUserWhere</span><span class="o">(</span><span class="s">&quot;username = &#39;&quot;</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;&#39;&quot;</span><span class="o">);</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">user2</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of user and user2 should be the same&quot;</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">user2</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;usernames of user and user2 should be the same&quot;</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">(),</span> <span class="n">user2</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;emails of user and user2 should be the same&quot;</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">user2</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create user, delete the user by ID, make sure the user entry doesn't exist anymore</li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDeleteUser</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="kt">long</span> <span class="n">userID</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">userID</span><span class="o">);</span>
    <span class="n">assertNull</span><span class="o">(</span><span class="n">datasource</span><span class="o">.</span><span class="na">getUserById</span><span class="o">(</span><span class="n">userID</span><span class="o">));</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create a user, make the user active, get active user from the database,
<ul><li>make sure the returned user is the sae as original one</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetSetActiveUser</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">setActiveUser</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    <span class="n">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getActiveUser</span><span class="o">();</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">user2</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of user and user2 should be the same&quot;</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">user2</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;usernames of user and user2 should be the same&quot;</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">(),</span> <span class="n">user2</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;emails of user and user2 should be the same&quot;</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">user2</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>    
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create a user, call logoutActive User,
<ul><li>fetch active user and make use null is returned</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testLogoutActiveUser</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">logoutActiveUser</span><span class="o">();</span>
    <span class="n">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getActiveUser</span><span class="o">();</span>
    <span class="n">assertNull</span><span class="o">(</span><span class="n">user2</span><span class="o">);</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-12"><td class="docs"><div class="pilwrap"><a href="#section-12" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create a sequence and make sure that the entry has correct owner user ID
<ul><li>and title</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCreateSequence</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence&quot;</span><span class="o">);</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;userOwnerID should be same as userID&quot;</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">seq</span><span class="o">.</span><span class="na">getOwnerUserID</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;title should be testSequence&quot;</span><span class="o">,</span> <span class="s">&quot;testSequence&quot;</span><span class="o">,</span> <span class="n">seq</span><span class="o">.</span><span class="na">getTitle</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-13"><td class="docs"><div class="pilwrap"><a href="#section-13" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create a sequence, try fetching the entry by ID and make sure 
<ul><li>the original sequence and fetched one are the same</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetSequenceById</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence&quot;</span><span class="o">);</span>   
    <span class="kt">long</span> <span class="n">seqID</span> <span class="o">=</span> <span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="n">Sequence</span> <span class="n">seq2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getSequenceById</span><span class="o">(</span><span class="n">seqID</span><span class="o">);</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">seq2</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of seq and seq2 should be the same&quot;</span><span class="o">,</span> <span class="n">seqID</span><span class="o">,</span> <span class="n">seq2</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-14"><td class="docs"><div class="pilwrap"><a href="#section-14" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create sequence, delete the sequence by ID, make sure 
<ul><li>the sequence entry doesn't exist anymore</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDeleteSequence</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence&quot;</span><span class="o">);</span>
    <span class="kt">long</span> <span class="n">seqID</span> <span class="o">=</span> <span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seqID</span><span class="o">);</span>
    <span class="n">assertNull</span><span class="o">(</span><span class="n">datasource</span><span class="o">.</span><span class="na">getUserById</span><span class="o">(</span><span class="n">seqID</span><span class="o">));</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-15"><td class="docs"><div class="pilwrap"><a href="#section-15" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create a track and make sure that the entry has correct owner user ID
<ul><li>and parent sequence ID</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCreateTrack</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence&quot;</span><span class="o">);</span>
    <span class="n">Track</span> <span class="n">track</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createTrack</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">track</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;ownerUserID should be same as userID&quot;</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">track</span><span class="o">.</span><span class="na">getOwnerUserID</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;parentSequenceID should be same as sequenceID&quot;</span><span class="o">,</span> <span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">track</span><span class="o">.</span><span class="na">getParentSequenceID</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteTrack</span><span class="o">(</span><span class="n">track</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-16"><td class="docs"><div class="pilwrap"><a href="#section-16" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create a track, try fetching the entry by ID and make sure 
<ul><li>the original track and fetched one are the same</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetTrackById</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence&quot;</span><span class="o">);</span>
    <span class="n">Track</span> <span class="n">track</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createTrack</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>
    <span class="kt">long</span> <span class="n">trackID</span> <span class="o">=</span> <span class="n">track</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="n">Track</span> <span class="n">track2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getTrackById</span><span class="o">(</span><span class="n">trackID</span><span class="o">);</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">track2</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of track and track2 should be the same&quot;</span><span class="o">,</span> <span class="n">trackID</span><span class="o">,</span> <span class="n">track2</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteTrack</span><span class="o">(</span><span class="n">track</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-17"><td class="docs"><div class="pilwrap"><a href="#section-17" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create track, delete the track by ID, make sure the track entry doesn't exist anymore</li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDeleteTrack</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence&quot;</span><span class="o">);</span>
    <span class="n">Track</span> <span class="n">track</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createTrack</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>
    <span class="kt">long</span> <span class="n">trackID</span> <span class="o">=</span> <span class="n">track</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteTrack</span><span class="o">(</span><span class="n">trackID</span><span class="o">);</span>
    <span class="n">assertNull</span><span class="o">(</span><span class="n">datasource</span><span class="o">.</span><span class="na">getUserById</span><span class="o">(</span><span class="n">trackID</span><span class="o">));</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-18"><td class="docs"><div class="pilwrap"><a href="#section-18" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create an audio file and make sure that the entry has correct owner user ID
<ul><li>and file path</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCreateAudioFile</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">AudioFile</span> <span class="n">file</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createAudioFile</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testFilePath&quot;</span><span class="o">);</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;userOwnerID should be same as userID&quot;</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">file</span><span class="o">.</span><span class="na">getOwnerUserID</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;file path should be testFilePath&quot;</span><span class="o">,</span> <span class="s">&quot;testFilePath&quot;</span><span class="o">,</span> <span class="n">file</span><span class="o">.</span><span class="na">getClientFilePath</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteAudioFile</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-19"><td class="docs"><div class="pilwrap"><a href="#section-19" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create an audio file, try fetching the entry by ID and make sure 
<ul><li>the original file and fetched one are the same</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetAudioFileById</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">AudioFile</span> <span class="n">file</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createAudioFile</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testFilePath&quot;</span><span class="o">);</span>    
    <span class="kt">long</span> <span class="n">fileID</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="n">AudioFile</span> <span class="n">file2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getAudioFileById</span><span class="o">(</span><span class="n">fileID</span><span class="o">);</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">file2</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of file and file2 should be the same&quot;</span><span class="o">,</span> <span class="n">fileID</span><span class="o">,</span> <span class="n">file2</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteAudioFile</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-20"><td class="docs"><div class="pilwrap"><a href="#section-20" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create audio file, delete the file by ID, make sure 
<ul><li>the file entry doesn't exist anymore</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDeleteAudioFile</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">AudioFile</span> <span class="n">file</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createAudioFile</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testFilePath&quot;</span><span class="o">);</span>
    <span class="kt">long</span> <span class="n">fileID</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteAudioFile</span><span class="o">(</span><span class="n">fileID</span><span class="o">);</span>
    <span class="n">assertNull</span><span class="o">(</span><span class="n">datasource</span><span class="o">.</span><span class="na">getUserById</span><span class="o">(</span><span class="n">fileID</span><span class="o">));</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-21"><td class="docs"><div class="pilwrap"><a href="#section-21" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create a user and make sure that the entry has correct owner user ID,
<ul><li>parent track ID, and corresponding audio file ID</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCreateClip</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence&quot;</span><span class="o">);</span>
    <span class="n">Track</span> <span class="n">track</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createTrack</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>
    <span class="n">AudioFile</span> <span class="n">file</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createAudioFile</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testFilePath&quot;</span><span class="o">);</span>
    <span class="n">Clip</span> <span class="n">clip</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createClip</span><span class="o">(</span><span class="n">track</span><span class="o">,</span> <span class="n">file</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">clip</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;ownerUserID should be same as userID&quot;</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">clip</span><span class="o">.</span><span class="na">getOwnerUserID</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;parentTrackID should be same as trackID&quot;</span><span class="o">,</span> <span class="n">track</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">clip</span><span class="o">.</span><span class="na">getParentTrackID</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;audioFileID should be same as fileID&quot;</span><span class="o">,</span> <span class="n">file</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">clip</span><span class="o">.</span><span class="na">getAudioFileID</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteClip</span><span class="o">(</span><span class="n">clip</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteTrack</span><span class="o">(</span><span class="n">track</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-22"><td class="docs"><div class="pilwrap"><a href="#section-22" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create a clip, try fetching the entry by ID and make sure 
<ul><li>the original clip and fetched one are the same</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetClipById</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence&quot;</span><span class="o">);</span>
    <span class="n">Track</span> <span class="n">track</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createTrack</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>
    <span class="n">AudioFile</span> <span class="n">file</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createAudioFile</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testFilePath&quot;</span><span class="o">);</span>
    <span class="n">Clip</span> <span class="n">clip</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createClip</span><span class="o">(</span><span class="n">track</span><span class="o">,</span> <span class="n">file</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
    <span class="kt">long</span> <span class="n">clipID</span> <span class="o">=</span> <span class="n">clip</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="n">Clip</span> <span class="n">clip2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getClipById</span><span class="o">(</span><span class="n">clipID</span><span class="o">);</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">clip2</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of clip and clip2 should be the same&quot;</span><span class="o">,</span> <span class="n">clipID</span><span class="o">,</span> <span class="n">clip2</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteClip</span><span class="o">(</span><span class="n">clip</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteTrack</span><span class="o">(</span><span class="n">track</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-23"><td class="docs"><div class="pilwrap"><a href="#section-23" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create clip, delete the clip by ID, make sure the clip entry doesn't exist anymore</li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testDeleteClip</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence&quot;</span><span class="o">);</span>
    <span class="n">Track</span> <span class="n">track</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createTrack</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>
    <span class="n">AudioFile</span> <span class="n">file</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createAudioFile</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testFilePath&quot;</span><span class="o">);</span>
    <span class="n">Clip</span> <span class="n">clip</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createClip</span><span class="o">(</span><span class="n">track</span><span class="o">,</span> <span class="n">file</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
    <span class="kt">long</span> <span class="n">clipID</span> <span class="o">=</span> <span class="n">clip</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteClip</span><span class="o">(</span><span class="n">clipID</span><span class="o">);</span>
    <span class="n">assertNull</span><span class="o">(</span><span class="n">datasource</span><span class="o">.</span><span class="na">getUserById</span><span class="o">(</span><span class="n">clipID</span><span class="o">));</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteTrack</span><span class="o">(</span><span class="n">track</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  
  </pre></div></td></tr><tr id="section-24"><td class="docs"><div class="pilwrap"><a href="#section-24" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create 2 sequences, fetch a list of all sequences from the database.
<ul><li>Note that the database has a dummy project hardcoded, so one sequence already</li>
<li>exists in the sequence table and the size of returned list will be 3 and not 2.</li>
<li>Check that list size is 3, and sequences on the list are the same as created ones</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetAllSequences</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq1</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence1&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence2&quot;</span><span class="o">);</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Sequence</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getAllSequences</span><span class="o">();</span>
    
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;size of list should be 3&quot;</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of seq1 and first sequence on the list should be the same&quot;</span><span class="o">,</span> <span class="n">seq1</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of seq2 and second sequence on the list should be the same&quot;</span><span class="o">,</span> <span class="n">seq2</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="na">getId</span><span class="o">());</span>
    
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seq1</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seq2</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-25"><td class="docs"><div class="pilwrap"><a href="#section-25" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create 2 tracks with the same parent sequence, 
<ul><li>fetch a list of all tracks from the database by the parent sequence ID,</li>
<li>check that list size is 2, and tracks on the list are the same as created ones</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetTrackBySequenceId</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence&quot;</span><span class="o">);</span>
    <span class="n">Track</span> <span class="n">track1</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createTrack</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>
    <span class="n">Track</span> <span class="n">track2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createTrack</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>
    
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Track</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getTracksBySequenceId</span><span class="o">(</span><span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;size of list should be 2&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of track1 and first track on the list should be the same&quot;</span><span class="o">,</span> <span class="n">track1</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of track2 and second track on the list should be the same&quot;</span><span class="o">,</span> <span class="n">track2</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">getId</span><span class="o">());</span>
    
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteTrack</span><span class="o">(</span><span class="n">track1</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteTrack</span><span class="o">(</span><span class="n">track2</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>    
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-26"><td class="docs"><div class="pilwrap"><a href="#section-26" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create 2 clips with the same parent track, 
<ul><li>fetch a list of all clips from the database by the parent track ID,</li>
<li>check that list size is 2, and clips on the list are the same as created ones</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetClipsByTrackId</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">Sequence</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createSequence</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testSequence&quot;</span><span class="o">);</span>
    <span class="n">Track</span> <span class="n">track</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createTrack</span><span class="o">(</span><span class="n">seq</span><span class="o">);</span>
    <span class="n">AudioFile</span> <span class="n">file</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createAudioFile</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testFilePath&quot;</span><span class="o">);</span>
    <span class="n">Clip</span> <span class="n">clip1</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createClip</span><span class="o">(</span><span class="n">track</span><span class="o">,</span> <span class="n">file</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
    <span class="n">Clip</span> <span class="n">clip2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createClip</span><span class="o">(</span><span class="n">track</span><span class="o">,</span> <span class="n">file</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
    
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Clip</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getClipsByTrackId</span><span class="o">(</span><span class="n">track</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;size of list should be 2&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of clip1 and first clip on the list should be the same&quot;</span><span class="o">,</span> <span class="n">clip1</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of clip2 and second clip on the list should be the same&quot;</span><span class="o">,</span> <span class="n">clip2</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">getId</span><span class="o">());</span>
    
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteClip</span><span class="o">(</span><span class="n">clip1</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteClip</span><span class="o">(</span><span class="n">clip2</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteTrack</span><span class="o">(</span><span class="n">track</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteSequence</span><span class="o">(</span><span class="n">seq</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>
  </pre></div></td></tr><tr id="section-27"><td class="docs"><div class="pilwrap"><a href="#section-27" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><ul>
<li>Create 2 audio files with the same owner user, 
<ul><li>fetch a list of all audio files from the database by the owner user ID,</li>
<li>check that list size is 2, and audio files on the list are the same as created ones</li></ul></li>
</ul></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetAudioFilesByUserId</span><span class="o">(){</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="mi">1234567890</span><span class="o">,</span> <span class="s">&quot;testUser&quot;</span><span class="o">,</span> <span class="s">&quot;testUser@mail.com&quot;</span><span class="o">);</span>
    <span class="n">AudioFile</span> <span class="n">file1</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createAudioFile</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testFilePath1&quot;</span><span class="o">);</span>
    <span class="n">AudioFile</span> <span class="n">file2</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">createAudioFile</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="s">&quot;testFilePath2&quot;</span><span class="o">);</span>
    
    <span class="n">AudioFile</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">datasource</span><span class="o">.</span><span class="na">getAudioFilesByUserId</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">assertNotNull</span><span class="o">(</span><span class="n">arr</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;size of list should be 2&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="n">arr</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of file1 and first audio file on the list should be the same&quot;</span><span class="o">,</span> <span class="n">file1</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">arr</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="s">&quot;IDs of file2 and second audio file on the list should be the same&quot;</span><span class="o">,</span> <span class="n">file2</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">arr</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="na">getId</span><span class="o">());</span>
    
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteAudioFile</span><span class="o">(</span><span class="n">file1</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteAudioFile</span><span class="o">(</span><span class="n">file2</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">datasource</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
  <span class="o">}</span>

<span class="o">}</span>

</pre></div></td></tr></tbody></table><div id="generated">generated Thu May 02 2013 20:27:56 GMT+0000 (UTC)  </div><div id="projectname"><a href="../../../../../../index.html">Lper</a></div></div></body></html>